!function(modules){function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={i:moduleId,l:!1,exports:{}};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.l=!0,module.exports}var installedModules={};__webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.d=function(exports,name,getter){__webpack_require__.o(exports,name)||Object.defineProperty(exports,name,{configurable:!1,enumerable:!0,get:getter})},__webpack_require__.n=function(module){var getter=module&&module.__esModule?function(){return module.default}:function(){return module};return __webpack_require__.d(getter,"a",getter),getter},__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=3)}([function(module,exports,__webpack_require__){"use strict";function getSchemaOptions(schema){return componentSchema_1.assertComponentSchema(schema),Object.assign({},new SchemaOptions,exports.globalOptions.schema,utils_1.getConstructorProp(schema,exports.COMPONENT_SCHEMA_OPTIONS))}function getActionName(key,schema){var options=getSchemaOptions(schema),actionName=key,actionNamespace=schema.constructor.name;return options.uppercaseActions&&(actionName=snakecase(actionName).toUpperCase(),actionNamespace=snakecase(actionNamespace).toUpperCase()),options.actionNamespace&&(actionName=actionNamespace+"."+actionName),actionName}Object.defineProperty(exports,"__esModule",{value:!0});var componentSchema_1=__webpack_require__(1),utils_1=__webpack_require__(2),snakecase=__webpack_require__(5);exports.COMPONENT_SCHEMA_OPTIONS=Symbol("COMPONENT_SCHEMA_OPTIONS");var SchemaOptions=function(){function SchemaOptions(){this.actionNamespace=!0,this.uppercaseActions=!0,this.updateState=!0}return SchemaOptions}();exports.SchemaOptions=SchemaOptions,exports.getSchemaOptions=getSchemaOptions,exports.getActionName=getActionName;var LogLevel;!function(LogLevel){LogLevel[LogLevel.None=0]="None",LogLevel[LogLevel.Verbose=1]="Verbose",LogLevel[LogLevel.Debug=2]="Debug",LogLevel[LogLevel.Silent=10]="Silent"}(LogLevel=exports.LogLevel||(exports.LogLevel={}));var GlobalOptions=function(){function GlobalOptions(){this.logLevel=LogLevel.Silent,this.schema=new SchemaOptions}return GlobalOptions}();exports.GlobalOptions=GlobalOptions,exports.globalOptions=new GlobalOptions},function(module,exports,__webpack_require__){"use strict";function component(ctorOrOptions){if("function"!=typeof ctorOrOptions)return function(ctor){return componentSchemaDecorator(ctor,ctorOrOptions)};componentSchemaDecorator.call(void 0,ctorOrOptions)}function isComponentSchema(obj){return utils_1.getConstructorProp(obj,COMPONENT_SCHEMA)}function assertComponentSchema(obj){if(!isComponentSchema(obj))throw new Error("Invalid argument. component expected.")}function componentSchemaDecorator(ctor,options){if(utils_1.getArgumentNames(ctor).length)throw new Error("componentSchema classes must have a parameter-less constructor");ctor[COMPONENT_SCHEMA]=!0,ctor[options_1.COMPONENT_SCHEMA_OPTIONS]=options}Object.defineProperty(exports,"__esModule",{value:!0});var options_1=__webpack_require__(0),utils_1=__webpack_require__(2),COMPONENT_SCHEMA=Symbol("COMPONENT_SCHEMA");exports.component=component,exports.isComponentSchema=isComponentSchema,exports.assertComponentSchema=assertComponentSchema},function(module,exports,__webpack_require__){"use strict";function getArgumentNames(func){var args,FN_ARGS=/^function\s*?[^\(]*?\(\s*?([^\)]*?)\)/m,CLASS_CTOR_ARGS=/^class[\s\S]*?constructor\s*?[^\(]*?\(\s*?([^\)]*?)\)/m,functionArgsRegex=func.toString().match(FN_ARGS),classArgsRegex=func.toString().match(CLASS_CTOR_ARGS);if(classArgsRegex&&classArgsRegex.length)args=classArgsRegex[1];else{if(!functionArgsRegex||!functionArgsRegex.length)return[];args=functionArgsRegex[1]}return args=args.split(",").map(function(str){return str.trim()}).filter(function(arg){return""!==arg})}function getPrototype(obj){if(obj)return obj.prototype||obj.constructor.prototype}function getMethods(obj){if(obj){var proto=getPrototype(obj);if(proto){for(var methods={},_i=0,_a=Object.keys(proto);_i<_a.length;_i++){var key=_a[_i];"function"==typeof proto[key]&&(methods[key]=proto[key])}return methods}}}function getProp(obj,path){return"string"==typeof path&&(path=path.replace(/\[|\]/g,".").split(".").filter(function(token){return"string"==typeof token&&""!==token.trim()})),path.reduce(function(result,key){if("object"==typeof result&&key)return result[key.toString()]},obj)}function getConstructorProp(obj,key){return obj&&obj.constructor&&obj.constructor[key]}Object.defineProperty(exports,"__esModule",{value:!0}),exports.getArgumentNames=getArgumentNames,exports.getPrototype=getPrototype,exports.getMethods=getMethods,exports.getProp=getProp,exports.getConstructorProp=getConstructorProp},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var componentSchema_1=__webpack_require__(1);exports.component=componentSchema_1.component;var options_1=__webpack_require__(0);exports.SchemaOptions=options_1.SchemaOptions,exports.GlobalOptions=options_1.GlobalOptions,exports.LogLevel=options_1.LogLevel;var reduxApp_1=__webpack_require__(6);exports.ReduxApp=reduxApp_1.ReduxApp},function(module,exports){module.exports=require("lodash.snakecase")},function(module,exports,__webpack_require__){"use strict";var __assign=this&&this.__assign||Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++){s=arguments[i];for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p])}return t};Object.defineProperty(exports,"__esModule",{value:!0});var redux_1=__webpack_require__(7),component_1=__webpack_require__(8),options_1=__webpack_require__(0),reducers_1=__webpack_require__(10),ReduxApp=function(){function ReduxApp(appSchema){for(var params=[],_i=1;_i<arguments.length;_i++)params[_i-1]=arguments[_i];var dummyReducer=function(){};this.store=redux_1.createStore.apply(void 0,[dummyReducer].concat(params));var rootComponent=new component_1.Component(this.store,appSchema,[]);this.root=rootComponent;var actualReducer=this.getReducer(rootComponent);this.store.replaceReducer(actualReducer)}return ReduxApp.prototype.getReducer=function(component){for(var rootReducer=component[component_1.REDUCER],subReducers={},_i=0,_a=Object.keys(component);_i<_a.length;_i++){var key=_a[_i];component[key]instanceof component_1.Component&&(subReducers[key]=this.getReducer(component[key]))}if(Object.keys(subReducers).length){var combinedSubReducer=reducers_1.simpleCombineReducers(subReducers);return function(state,action){var thisState=rootReducer(state,action),subStates=combinedSubReducer(state,action);return __assign({},thisState,subStates)}}return rootReducer},ReduxApp.options=options_1.globalOptions,ReduxApp}();exports.ReduxApp=ReduxApp},function(module,exports){module.exports=require("redux")},function(module,exports,__webpack_require__){"use strict";function createSelf(component,store,schema,path){for(var _i=0,_a=Object.keys(schema);_i<_a.length;_i++){var key=_a[_i];component[key]=schema[key]}var proto=utils_1.getPrototype(component),patchedProto=createActions(store.dispatch,schema);if(Object.assign(proto,patchedProto),component[exports.REDUCER]=createReducer(schema),options_1.getSchemaOptions(schema).updateState){var unsubscribe_1=store.subscribe(function(){return updateState(component,store.getState(),path)});component[DISPOSE].push({dispose:function(){return unsubscribe_1()}})}}function createSubComponents(component,store,schema,path){for(var _i=0,_a=Object.keys(schema);_i<_a.length;_i++){var key=_a[_i],subSchema=schema[key];componentSchema_1.isComponentSchema(subSchema)&&(component[key]=new Component(store,subSchema,path.concat([key])))}}function createActions(dispatch,schema){var methods=utils_1.getMethods(schema);if(methods){var outputActions={};return Object.keys(methods).forEach(function(key){outputActions[key]=function(){for(var payload=[],_i=0;_i<arguments.length;_i++)payload[_i]=arguments[_i];dispatch({type:options_1.getActionName(key,schema),payload:payload})}}),outputActions}}function createReducer(schema){var methods=utils_1.getMethods(schema),methodNames={};return Object.keys(methods).forEach(function(methName){var actionName=options_1.getActionName(methName,schema);methodNames[actionName]=methName}),function(state,action){if(log_1.verbose("[reducer] reducer of: "+schema.constructor.name+", action: "+action.type),void 0===state)return log_1.verbose("[reducer] state is undefined, returning initial value"),schema;var methodName=methodNames[action.type],actionReducer=methods[methodName];if(!actionReducer)return log_1.verbose("[reducer] no matching action in this reducer, returning previous state"),state;var newState=Object.assign({},state);return actionReducer.call.apply(actionReducer,[newState].concat(action.payload)),log_1.verbose("[reducer] reducer invoked returning new state"),newState}}function updateState(component,newGlobalState,path){log_1.verbose("[updateState] updating component in path: ",path.join("."));var self=component,newScopedState=utils_1.getProp(newGlobalState,path),propsDeleted=[],propsAssigned=[];log_1.verbose("[updateState] store before: ",newScopedState),log_1.verbose("[updateState] component before: ",component),Object.keys(newScopedState).forEach(function(key){self[key]===newScopedState[key]||self[key]instanceof Component||(self[key]=newScopedState[key],propsAssigned.push(key))}),Object.keys(component).forEach(function(key){void 0===newScopedState[key]&&(delete self[key],propsDeleted.push(key))}),propsDeleted.length||propsAssigned.length?(log_1.verbose("[updateState] store after: ",newScopedState),log_1.verbose("[updateState] component after: ",component),log_1.debug("[updateState] state of "+path.join(".")+" changed"),propsDeleted.length?log_1.debug("[updateState] props deleted: ",propsDeleted):log_1.verbose("[updateState] props deleted: ",propsDeleted),propsAssigned.length?log_1.debug("[updateState] props assigned: ",propsAssigned):log_1.verbose("[updateState] props assigned: ",propsAssigned)):log_1.verbose("[updateState] no change")}Object.defineProperty(exports,"__esModule",{value:!0});var componentSchema_1=__webpack_require__(1),log_1=__webpack_require__(9),options_1=__webpack_require__(0),utils_1=__webpack_require__(2);exports.REDUCER=Symbol("REDUCER");var DISPOSE=Symbol("DISPOSE"),Component=function(){function Component(store,schema,path){if(!componentSchema_1.isComponentSchema(schema))throw new Error("Argument 'schema' is not a component schema. Did you forget to use the decorator?");this[DISPOSE]=[],createSelf(this,store,schema,path),createSubComponents(this,store,schema,path),log_1.debug("[Component] new "+schema.constructor.name+" component created. path: "+path.join("."))}return Component.prototype.disposeComponent=function(){for(var disposables=this[DISPOSE];disposables.length;){var disposable=disposables.pop();disposable&&disposable.dispose&&disposable.dispose()}},Component}();exports.Component=Component},function(module,exports,__webpack_require__){"use strict";function debug(message){for(var optionalParams=[],_i=1;_i<arguments.length;_i++)optionalParams[_i-1]=arguments[_i];shouldLog(options_1.LogLevel.Debug)&&console.log.apply(console,["[ReduxApp] [DEBUG] "+message].concat(optionalParams))}function verbose(message){for(var optionalParams=[],_i=1;_i<arguments.length;_i++)optionalParams[_i-1]=arguments[_i];shouldLog(options_1.LogLevel.Verbose)&&console.log.apply(console,["[ReduxApp] [VERBOSE] "+message].concat(optionalParams))}function shouldLog(level){return options_1.globalOptions.logLevel!==options_1.LogLevel.None&&!(options_1.globalOptions.logLevel>level)}Object.defineProperty(exports,"__esModule",{value:!0});var options_1=__webpack_require__(0);exports.debug=debug,exports.verbose=verbose},function(module,exports,__webpack_require__){"use strict";function simpleCombineReducers(reducers){var reducerKeys=Object.keys(reducers);return function(state,action){void 0===state&&(state={});for(var hasChanged=!1,nextState={},_i=0,reducerKeys_1=reducerKeys;_i<reducerKeys_1.length;_i++){var key=reducerKeys_1[_i],reducer=reducers[key],previousStateForKey=state[key],nextStateForKey=reducer(previousStateForKey,action);nextState[key]=nextStateForKey,hasChanged=hasChanged||nextStateForKey!==previousStateForKey}return hasChanged?nextState:state}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.simpleCombineReducers=simpleCombineReducers}]);