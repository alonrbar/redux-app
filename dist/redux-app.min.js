!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("redux-app",[],t):"object"==typeof exports?exports["redux-app"]=t():e["redux-app"]=t()}(this,function(){return function(e){function t(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=4)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.REDUCER=Symbol("REDUX-APP.COMPONENT.REDUCER"),t.DISPOSE=Symbol("REDUX-APP.COMPONENT.DISPOSE"),t.COMPONENT_SCHEMA=Symbol("REDUX-APP.COMPONENT_SCHEMA"),t.COMPONENT_SCHEMA_OPTIONS=Symbol("REDUX-APP.COMPONENT_SCHEMA.OPTIONS"),t.WITH_ID=Symbol("REDUX-APP.COMPONENT_SCHEMA.WITH_ID"),t.AUTO_ID=Symbol("REDUX-APP.COMPONENT_SCHEMA.AUTO_ID")},function(e,t,n){"use strict";function o(e){return i.assertComponentSchema(e),Object.assign({},new a,t.globalOptions.schema,c.getConstructorProp(e,u.COMPONENT_SCHEMA_OPTIONS))}function r(e,t){var n=o(t),r=e,i=t.constructor.name;return n.uppercaseActions&&(r=s(r).toUpperCase(),i=s(i).toUpperCase()),n.actionNamespace&&(r=i+"."+r),r}Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),c=n(3),u=n(0),s=n(6),a=function(){function e(){this.actionNamespace=!0,this.uppercaseActions=!0,this.updateState=!0}return e}();t.SchemaOptions=a,t.getSchemaOptions=o,t.getActionName=r;var p;!function(e){e[e.None=0]="None",e[e.Verbose=1]="Verbose",e[e.Debug=2]="Debug",e[e.Silent=10]="Silent"}(p=t.LogLevel||(t.LogLevel={}));var f=function(){function e(){this.logLevel=p.Silent,this.schema=new a}return e}();t.GlobalOptions=f,t.globalOptions=new f},function(e,t,n){"use strict";function o(e){if("function"!=typeof e)return function(t){return c(t,e)};c.call(void 0,e)}function r(e){return u.getConstructorProp(e,s.COMPONENT_SCHEMA)}function i(e,t){if(!r(e))throw new Error(t||"Invalid argument. component expected.")}function c(e,t){if(u.getArgumentNames(e).length)throw new Error("componentSchema classes must have a parameter-less constructor");e[s.COMPONENT_SCHEMA]=!0,e[s.COMPONENT_SCHEMA_OPTIONS]=t}Object.defineProperty(t,"__esModule",{value:!0});var u=n(3),s=n(0);t.component=o,t.isComponentSchema=r,t.assertComponentSchema=i},function(e,t,n){"use strict";function o(e){var t,n=/^function\s*?[^\(]*?\(\s*?([^\)]*?)\)/m,o=/^class[\s\S]*?constructor\s*?[^\(]*?\(\s*?([^\)]*?)\)/m,r=e.toString().match(n),i=e.toString().match(o);if(i&&i.length)t=i[1];else{if(!r||!r.length)return[];t=r[1]}return t=t.split(",").map(function(e){return e.trim()}).filter(function(e){return""!==e})}function r(e){if(e)return e.prototype||e.constructor.prototype}function i(e){if(e){var t=r(e);if(t){for(var n={},o=0,i=Object.keys(t);o<i.length;o++){var c=i[o];"function"==typeof t[c]&&(n[c]=t[c])}return n}}}function c(e,t){return"string"==typeof t&&(t=t.replace(/\[|\]/g,".").split(".").filter(function(e){return"string"==typeof e&&""!==e.trim()})),t.reduce(function(e,t){if("object"==typeof e&&t)return e[t.toString()]},e)}function u(e,t){return e&&e.constructor&&e.constructor[t]}Object.defineProperty(t,"__esModule",{value:!0}),t.getArgumentNames=o,t.getPrototype=r,t.getMethods=i,t.getProp=c,t.getConstructorProp=u},function(e,t,n){e.exports=n(5)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(2);t.component=o.component;var r=n(1);t.SchemaOptions=r.SchemaOptions,t.GlobalOptions=r.GlobalOptions,t.LogLevel=r.LogLevel;var i=n(7);t.ReduxApp=i.ReduxApp;var c=n(12);t.withId=c.withId},function(e,t){e.exports=require("lodash.snakecase")},function(e,t,n){"use strict";var o=this&&this.__assign||Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e};Object.defineProperty(t,"__esModule",{value:!0});var r=n(8),i=n(9),c=n(1),u=n(11),s=n(0),a=function(){function e(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var o=function(){};this.store=r.createStore.apply(void 0,[o].concat(t));var c=new i.Component(this.store,e,null,[]);this.root=c;var u=this.getReducer(c);this.store.replaceReducer(u)}return e.prototype.getReducer=function(e){for(var t=e[s.REDUCER],n={},r=0,c=Object.keys(e);r<c.length;r++){var a=c[r];e[a]instanceof i.Component&&(n[a]=this.getReducer(e[a]))}if(Object.keys(n).length){var p=u.simpleCombineReducers(n);return function(e,n){var r=t(e,n),i=p(e,n);return o({},r,i)}}return t},e.options=c.globalOptions,e}();t.ReduxApp=a},function(e,t){e.exports=require("redux")},function(e,t,n){"use strict";function o(e,t,n,o,r){for(var s=0,a=Object.keys(n);s<a.length;s++){var p=a[s];e[p]=n[p]}var l=i(t.dispatch,n,o,r);if(Object.assign(e,l),e[d.REDUCER]=c(n,o,r),f.getSchemaOptions(n).updateState){var v=t.subscribe(function(){return u(e,t.getState(),r)});e[d.DISPOSE].push({dispose:function(){return v()}})}}function r(e,t,n,o){for(var r=0,i=Object.keys(n);r<i.length;r++){var c=i[r],u=n[c];a.isComponentSchema(u)&&(e[c]=new v(t,u,n,o.concat([c])))}}function i(e,t,n,o){var r=l.getMethods(t);if(r){var i=s(n,o),c={};return Object.keys(r).forEach(function(n){c[n]=function(){for(var o=[],r=0;r<arguments.length;r++)o[r]=arguments[r];e({type:f.getActionName(n,t),id:i,payload:o})}}),c}}function c(e,t,n){var o=s(t,n),r=l.getMethods(e),i={};return Object.keys(r).forEach(function(t){var n=f.getActionName(t,e);i[n]=t}),function(t,n){if(p.verbose("[reducer] reducer of: "+e.constructor.name+", action: "+n.type),void 0===t)return p.verbose("[reducer] state is undefined, returning initial value"),e;if(o!==n.id)return p.verbose("[reducer] component id and action.id don't match ("+o+" !== "+n.id+")"),t;var c=i[n.type],u=r[c];if(!u)return p.verbose("[reducer] no matching action in this reducer, returning previous state"),t;var s=Object.assign({},t);return u.call.apply(u,[s].concat(n.payload)),p.verbose("[reducer] reducer invoked returning new state"),s}}function u(e,t,n){p.verbose("[updateState] updating component in path: ",n.join("."));var o=e,r=l.getProp(t,n),i=[],c=[];p.verbose("[updateState] store before: ",r),p.verbose("[updateState] component before: ",e),Object.keys(r).forEach(function(e){o[e]===r[e]||o[e]instanceof v||(o[e]=r[e],c.push(e))}),Object.keys(e).forEach(function(e){void 0===r[e]&&(delete o[e],i.push(e))}),i.length||c.length?(p.verbose("[updateState] store after: ",r),p.verbose("[updateState] component after: ",e),p.debug("[updateState] state of "+n.join(".")+" changed"),i.length?p.debug("[updateState] props deleted: ",i):p.verbose("[updateState] props deleted: ",i),c.length?p.debug("[updateState] props assigned: ",c):p.verbose("[updateState] props assigned: ",c)):p.verbose("[updateState] no change")}function s(e,t){if(e&&t.length){if(e[d.WITH_ID]){var n=t[t.length-1],o=e[d.WITH_ID][n];if(o){if(o===d.AUTO_ID){var r=--g;return p.verbose("[getComponentId] new component id generated: "+r),e[d.WITH_ID][n]=r,r}return o}}}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),p=n(10),f=n(1),l=n(3),d=n(0),v=function(){function e(e,t,n,i){if(!a.isComponentSchema(t))throw new Error("Argument 'schema' is not a component schema. Did you forget to use the decorator?");this[d.DISPOSE]=[],o(this,e,t,n,i),r(this,e,t,i),p.debug("[Component] new "+t.constructor.name+" component created. path: root."+i.join("."))}return e.prototype.disposeComponent=function(){for(var e=this[d.DISPOSE];e.length;){var t=e.pop();t&&t.dispose&&t.dispose()}},e}();t.Component=v;var g=0},function(e,t,n){"use strict";function o(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];i(c.LogLevel.Debug)&&console.log.apply(console,["[ReduxApp] [DEBUG] "+e].concat(t))}function r(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];i(c.LogLevel.Verbose)&&console.log.apply(console,["[ReduxApp] [VERBOSE] "+e].concat(t))}function i(e){return c.globalOptions.logLevel!==c.LogLevel.None&&!(c.globalOptions.logLevel>e)}Object.defineProperty(t,"__esModule",{value:!0});var c=n(1);t.debug=o,t.verbose=r},function(e,t,n){"use strict";function o(e){var t=Object.keys(e);return function(n,o){void 0===n&&(n={});for(var r=!1,i={},c=0,u=t;c<u.length;c++){var s=u[c],a=e[s],p=n[s],f=a(p,o);i[s]=f,r=r||f!==p}return r?i:n}}Object.defineProperty(t,"__esModule",{value:!0}),t.simpleCombineReducers=o},function(e,t,n){"use strict";function o(e){return function(t,n){t[r.WITH_ID]||(t[r.WITH_ID]={}),t[r.WITH_ID][n]=e||r.AUTO_ID}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.withId=o}])});